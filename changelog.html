<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>NodePress documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	   <link rel="stylesheet" href="./styles/style.css">
        <link rel="stylesheet" href="./styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="./" class="navbar-brand">NodePress documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content getting-started">
                   <div class="content-data">

<h1 id="changelog">Changelog</h1>
<p>All notable changes to this project will be documented in this file.</p>
<h3 id="3131-2022-12-21">3.13.1 (2022-12-21)</h3>
<p><strong>Feature</strong></p>
<ul>
<li>Fix <code>mongodump</code> command args</li>
</ul>
<h3 id="3130-2022-09-23">3.13.0 (2022-09-23)</h3>
<p><strong>Feature</strong></p>
<ul>
<li><code>/vote/site</code> and <code>/vote/article</code> merged into <code>/vote/post</code></li>
</ul>
<h3 id="3120-2022-09-23">3.12.0 (2022-09-23)</h3>
<p><strong>Feature</strong></p>
<ul>
<li>Add vote model</li>
<li>Improve feedback service</li>
</ul>
<h3 id="3110-2022-09-12">3.11.0 (2022-09-12)</h3>
<p><strong>Feature</strong></p>
<ul>
<li>Anonymous user vote email.</li>
<li>Add to <code>agent</code> vote notification email.</li>
</ul>
<p><strong>Chore</strong></p>
<ul>
<li>Upgrade deps</li>
</ul>
<h3 id="3101-2022-05-16">3.10.1 (2022-05-16)</h3>
<p><strong>Feature</strong></p>
<ul>
<li>Remove classified dir.</li>
<li>Improve DB backup mail context</li>
</ul>
<h3 id="3100-2022-05-15">3.10.0 (2022-05-15)</h3>
<p><strong>Feature</strong></p>
<ul>
<li>AliYun OSS to AWS S3</li>
<li>Remove STSToken API for cloud storage</li>
</ul>
<h3 id="394-2022-04-12">3.9.4 (2022-04-12)</h3>
<p><strong>Feature</strong></p>
<ul>
<li><strong>[Helper]</strong> improve <code>nodemailer</code> config</li>
<li><strong>[Helper]</strong> improve <code>akismet</code> types</li>
</ul>
<p><strong>Chore</strong></p>
<ul>
<li>Upgrade deps</li>
</ul>
<h3 id="390-2022-02-28">3.9.0 (2022-02-28)</h3>
<p><strong>Feature</strong></p>
<ul>
<li><strong>[Option]</strong> add <code>statement</code> <code>friend_links</code> field</li>
<li>Add <code>feedback</code> module</li>
</ul>
<h3 id="384-2022-02-19">3.8.4 (2022-02-19)</h3>
<p><strong>Feature</strong></p>
<ul>
<li><strong>[Article]</strong> add <code>lang</code> field</li>
</ul>
<h3 id="382-2022-02-15">3.8.2 (2022-02-15)</h3>
<p><strong>Feature</strong></p>
<ul>
<li>New API <code>/article/calendar</code></li>
<li>Refactoring API <code>/article/related/:id</code> to <code>/article/:id/context</code></li>
<li>Rename API <code>/article/hot</code> to <code>/article/hottest</code></li>
<li>Improve <code>Article</code> module</li>
</ul>
<h3 id="381-2022-02-15">3.8.1 (2022-02-15)</h3>
<p><strong>BugFix</strong></p>
<ul>
<li>fix <code>{ timestamps: false }</code> for<ul>
<li><code>article.meta.views</code></li>
<li><code>article.meta.likes</code></li>
<li><code>article.meta.comments</code></li>
<li><code>comment.vote</code></li>
<li><code>option.meta.likes</code></li>
</ul>
</li>
</ul>
<h3 id="380-2022-02-14">3.8.0 (2022-02-14)</h3>
<p><strong>Feature</strong></p>
<ul>
<li>improve <code>guards</code></li>
<li>improve <code>QueryParams</code> decorator</li>
<li>improve <code>Mongoose</code> types</li>
<li>improve <code>Model</code> &gt; <code>DTOs</code></li>
<li>improve <code>Option</code> module service</li>
<li>improve <code>Expansion</code> statistic service</li>
<li>Remove query <code>cache</code> field</li>
<li>Rename <code>tag.count</code> <code>category.count</code> to <code>&lt;target&gt;.articles_count</code></li>
<li>Add API <code>/article/hot</code> <code>/article/related</code> <code>/tag/all</code></li>
<li>Add <code>PermissionPipe</code> <code>ExposePipe</code> pipes</li>
<li>Rename <code>HttpProcessor</code> to <code>Responsor</code></li>
<li>Generate documentation by <code>compodoc</code></li>
</ul>
<h3 id="3715-2022-02-01">3.7.15 (2022-02-01)</h3>
<p><strong>Feature</strong></p>
<ul>
<li><strong>[MongoDB]</strong> improve MongoDB config &amp; backup</li>
</ul>
<h3 id="3714-2022-01-19">3.7.14 (2022-01-19)</h3>
<p><strong>Feature</strong></p>
<ul>
<li><code>express-rate-limit</code> &gt; <code>@nestjs/throttler</code></li>
<li><strong>[Vote]</strong> add throttler</li>
<li><strong>[Disqus]</strong> add throttler</li>
<li><strong>[Comment]</strong> add throttler</li>
</ul>
<h3 id="3711-2022-01-06">3.7.11 (2022-01-06)</h3>
<p><strong>Feature</strong></p>
<ul>
<li><strong>[Disqus]</strong> cache for userinfo &amp; thread</li>
</ul>
<h3 id="376-2022-01-05">3.7.6 (2022-01-05)</h3>
<p><strong>Feature</strong></p>
<ul>
<li><strong>[Article]</strong> random related articles</li>
<li><strong>[Comment]</strong> improve email content</li>
<li><strong>[Vote]</strong> send email to admin when new vote</li>
</ul>
<h3 id="374-2022-01-01">3.7.4 (2022-01-01)</h3>
<p><strong>Feature</strong></p>
<ul>
<li><strong>[Comment]</strong> add <code>reviseIPLocation</code> service</li>
</ul>
<h3 id="372-2021-12-31">3.7.2 (2021-12-31)</h3>
<p><strong>Chore</strong></p>
<ul>
<li>email text</li>
</ul>
<h3 id="v370-2021-12-31">v3.7.0 (2021-12-31)</h3>
<p><strong>Feature</strong></p>
<ul>
<li><strong>[Like]</strong> rename <code>Like</code> module to <code>Vote</code></li>
<li><strong>[Disqus]</strong> add Disqus comment module</li>
<li><strong>[Auth]</strong> rename <code>gravatar</code> to <code>avatar</code></li>
<li><strong>[Article]</strong> add <code>disabled_comment</code> field</li>
<li><strong>[Article]</strong> remove <code>t_content</code> field</li>
<li><strong>[Option]</strong> remove <code>icp</code> field</li>
<li><strong>[Option]</strong> rename <code>blacklist</code> to <code>blocklist</code></li>
<li><strong>[Comment]</strong> remove <code>is_top</code> field</li>
<li><strong>[Comment]</strong> add <code>dislikes</code> field</li>
<li><strong>[Comment]</strong> hidden <code>ip</code>, <code>email</code> fields</li>
<li><strong>[Comment]</strong> add <code>email_hash</code> virtual field</li>
<li><strong>[Helper]</strong> IP location services to <code>ip-api.com</code> &amp; <code>ipapi.co</code></li>
</ul>
<p><strong>Chore</strong></p>
<ul>
<li>Upgrade deps</li>
<li>Remove <code>geoip-lite</code> dep</li>
</ul>
<h3 id="v364-2021-12-21">v3.6.4 (2021-12-21)</h3>
<p><strong>Chore</strong></p>
<ul>
<li>Improve deploy logic</li>
</ul>
<h3 id="v363-2021-12-07">v3.6.3 (2021-12-07)</h3>
<p><strong>Feature</strong></p>
<ul>
<li>Fix archive article query options</li>
</ul>
<h3 id="v362-2021-12-07">v3.6.2 (2021-12-07)</h3>
<p><strong>Feature</strong></p>
<ul>
<li>Remove <code>mongoose-paginate</code></li>
<li>Remove <code>APP.LIMIT</code> config</li>
<li>Improve <code>AutoIncrementID.Config</code></li>
<li>Improve global paginate config</li>
</ul>
<h3 id="v360-2021-12-06">v3.6.0 (2021-12-06)</h3>
<p><strong>Feature</strong></p>
<ul>
<li>Remove <code>syndication</code> module</li>
<li>Remove <code>cache-manager-redis-store</code></li>
<li>Add <code>archve</code> module</li>
<li>Add global logger</li>
</ul>
<p><strong>Chore</strong></p>
<ul>
<li><p>Upgrade deps</p>
<ul>
<li><code>Redis</code> &gt; v4</li>
<li><code>nest</code> &gt; v8</li>
<li><code>mongoose</code> &gt; v6</li>
</ul>
</li>
</ul>
<h3 id="v352-2021-07-27">v3.5.2 (2021-07-27)</h3>
<p><strong>Chore</strong></p>
<ul>
<li>Upgrade deps</li>
<li>Update CI scripts</li>
<li>Update ESLint config &amp; format</li>
</ul>
<h3 id="v344">v3.4.4</h3>
<p><strong>Feature</strong></p>
<ul>
<li>DB backup shell &amp; path</li>
<li>Support patch API to backup DB &amp; recover DB</li>
</ul>
<h3 id="v343">v3.4.3</h3>
<p><strong>Chore</strong></p>
<ul>
<li>Upgrade all deps</li>
<li>Remove unused deps</li>
<li>Update API Document</li>
<li>Fix typos</li>
<li>Add <code>cspell.json</code></li>
</ul>
<p><strong>Breaking Change</strong></p>
<ul>
<li>Remove <code>Vlog</code> <code>Music</code> <code>GitHub</code> modules to BFF server</li>
</ul>
<h3 id="v342">v3.4.2</h3>
<p><strong>Chore</strong></p>
<ul>
<li>Upgrade all deps</li>
</ul>
<p><strong>Breaking Change</strong></p>
<ul>
<li>comment content HTML -&gt; markdown text</li>
<li>remove marked module</li>
</ul>
<h3 id="v341">v3.4.1</h3>
<p><strong>Chore</strong></p>
<ul>
<li>Upgrade all deps</li>
</ul>
<p><strong>Feature</strong></p>
<ul>
<li>support redis <code>password</code> config</li>
</ul>
<p><strong>Breaking Change</strong></p>
<ul>
<li>add fe public path</li>
<li>remove legacy folder file path for syndication</li>
</ul>
<h3 id="v340">v3.4.0</h3>
<ul>
<li>Upgrade deps</li>
<li>Fix bilibili video API url</li>
<li>Add AD config field (options)</li>
<li><code>Promise</code> to <code>async await</code></li>
<li><code>mongoose-auto-increment</code> to <a href="https://github.com/typegoose/auto-increment/"><code>auto-increment</code></a></li>
<li><del><code>mongoose-paginate</code> to <a href="https://github.com/aravindnc/mongoose-paginate-v2#readme"><code>mongoose-paginate-v2</code></a></del></li>
<li><a href="https://typegoose.github.io/typegoose/docs/api/decorators/prop#unique">Add documents id field to unique index</a></li>
<li><a href="https://typegoose.github.io/typegoose/docs/api/decorators/prop#_id">Improve sub documents <code>_id: false</code> option</a></li>
<li><a href="https://typegoose.github.io/typegoose/docs/api/decorators/prop#enum">Improve documents <code>enum</code> option</a></li>
</ul>
<h3 id="v333">v3.3.3</h3>
<ul>
<li>Wallpaper module support <code>en</code></li>
<li>Enable <code>esModuleInterop</code> for <code>tsconfig</code></li>
</ul>
<h3 id="v332">v3.3.2</h3>
<ul>
<li>Fix article/hotList <code>query.state</code></li>
<li>Upgrade TypeScript deep</li>
<li>Update <code>Optional Chaining</code></li>
</ul>
<h3 id="v330">v3.3.0</h3>
<ul>
<li>Rename Sitemap module to Syndication module</li>
<li>Add RSS service with Syndication module</li>
<li>Add renewal API with Auth module</li>
<li>Improve akismet module</li>
<li>Remove geo-ip service</li>
<li>Upgrade Nest</li>
<li>Upgrade Mongoose (remove MongoDB&#39;s autoConnect)</li>
<li>Upgrade RedisStore (workaround <code>is_cacheable_value</code> option)</li>
<li>Upgrade typegoose (Remove <code>getModelForSchema</code>)</li>
<li>Upgrade all dependencies</li>
<li>Replace ESLint with TSLint</li>
</ul>
<h3 id="v326">v3.2.6</h3>
<ul>
<li>Upgrade mongoose</li>
<li>Update README.md</li>
<li>Update FUNDING.yml</li>
</ul>
<h3 id="v324">v3.2.4</h3>
<ul>
<li>Replace QINIU to Aliyun OSS</li>
<li>Update uptoken and dbbackup module</li>
</ul>
<h3 id="v323">v3.2.3</h3>
<ul>
<li>Remove project page with sitemap</li>
</ul>
<h3 id="v322">v3.2.2</h3>
<ul>
<li>Add datebase backup service</li>
<li>Add actions</li>
<li>Update global console method</li>
</ul>
<h3 id="v320">v3.2.0</h3>
<ul>
<li>更新 所有依赖</li>
<li>更新 sitemap 模块及进行优化</li>
<li>更新 缓存及数据库模块、在核心节点增加告警服务</li>
<li>更新 SEO ping 服务</li>
<li>增加 API 文档</li>
<li>增加 logo 资源</li>
<li>增加 模型构造器、Provider 构造器、模型注入器</li>
<li>增加 Google 证书服务</li>
<li><del>增加 compodoc 文档构建器，但不实用</del></li>
<li>优化 各模型搜索业务完善为大小写通配，并 trim 处理</li>
<li>优化 验证模型</li>
<li>优化 鉴权业务</li>
<li>优化 helper 模块</li>
<li>优化 设置表</li>
<li>去除 对 nestjs-typegoose 模块的依赖</li>
<li>废弃 枚举常量接口</li>
</ul>
<h3 id="v310">v3.1.0</h3>
<ul>
<li>Update nestjs to v6.0</li>
<li>修正邮件服务文案错误</li>
<li>修复更新密码覆盖问题</li>
<li>修正缓存请求服务的问题</li>
<li>修正配置读取类型错误问题</li>
<li>升级 Wallpaper 业务</li>
</ul>
<h3 id="v300">v3.0.0</h3>
<ul>
<li>使用 <a href="https://github.com/nestjs/nest">Nest</a> 进行重构</li>
<li>增加 Bilibili Vlog 业务模块</li>
</ul>
<h3 id="v220">v2.2.0</h3>
<ul>
<li>opeitime logic</li>
<li>add constants api</li>
</ul>
<h3 id="v214">v2.1.4</h3>
<ul>
<li>增加统计数据接口</li>
<li>优化密码更新机制</li>
</ul>
<h3 id="v212">v2.1.2</h3>
<ul>
<li>升级完善全站缓存机制</li>
<li>增加时间定点任务库</li>
</ul>
<h3 id="v210">v2.1.0</h3>
<ul>
<li>优化编码风格</li>
<li>完善项目信息</li>
<li>完善 Js Doc 信息</li>
<li>Music 控制器增加 limit 参数</li>
<li>Github 控制器优化数据</li>
<li>增加 bing-wallpaper API 服务</li>
<li>使用更友好的 consola 日志模块</li>
<li>为控制器和 Model 抽象出单独的状态常量</li>
</ul>
<h3 id="v200">v2.0.0</h3>
<ul>
<li>文章增加原创、转载字段</li>
<li>优化评论系统的业务<ul>
<li>submitSpam 与移至黑名单功能映射</li>
<li>移黑功能，会自动将 SPAM 信息提交至 akismet，同时添加至系统黑名单</li>
</ul>
</li>
<li>升级 akismet-api 库，增加两项功能</li>
<li>升级 geoip-lite 库</li>
<li>升级 helmet 库</li>
<li>升级 jsonwebtoken 库，根据版本调整逻辑</li>
<li>升级 marked</li>
<li>升级 mongoose 库</li>
<li>升级 nodemailer 库，更新逻辑，去除 nodemailer-smtp-transport 库</li>
<li>升级 redis 库</li>
<li>升级 request 库</li>
<li>升级 sitemap 库，优化部分逻辑</li>
<li>升级 yargs 库</li>
<li>fork mongoose-paginate 修复旧方法警告问题</li>
<li>更新密码加密机制</li>
<li>增加检查 Token 有效性接口</li>
</ul>
<h3 id="v120">v1.2.0</h3>
<ul>
<li>重构了播放器 API</li>
</ul>
<h3 id="v110">v1.1.0</h3>
<ul>
<li>修复了评论数 bug</li>
</ul>
<h3 id="v100">v1.0.0</h3>
<ul>
<li>驱动搜索引擎 ping 接口 文章发布后自动 ping 给搜索引擎 xml</li>
<li>增加评论功能+黑名单，评论可自动校验 spam，及黑名单 (ip、邮箱、关键字的校验)</li>
<li>使用 helmet + 手动优化，优化程序安全性</li>
<li>优化 mongoose 实例</li>
<li>优化数据表结构</li>
<li>更新数据时时间更新</li>
<li>修复时间检索失效</li>
<li>增加 idle-gc 内存回收</li>
<li>增加百度搜索引擎的实时提交</li>
<li>更新模块化别名</li>
<li>更新 README.md</li>
<li>加入网站地图接口</li>
<li>网站地图由于缓存或者 primise 不能及时更新</li>
<li>网站地图的数据构成中文章需要筛选公开一发布的文章</li>
<li>对接百度统计开放平台 api</li>
<li>密码存储需要使用 md5 加密机制</li>
<li>token... 等 config 信息使用 node 命令参数在 shell 中配置覆盖</li>
<li>lean 和 翻页插件一起使用，返回的 id 字段是 _id bug</li>
<li>整理统一 result 的返回结构</li>
<li>围观后计数功能</li>
<li>多说转发热门文章接口</li>
<li>相关文章接口</li>
<li>使用 Redis 缓存标签、播放器、Github 数据</li>
</ul>





















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 0;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'getting-started';
            var COMPODOC_CURRENT_PAGE_URL = 'changelog.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="./js/libs/custom-elements.min.js"></script>
       <script src="./js/libs/lit-html.js"></script>

       <script src="./js/menu-wc.js" defer></script>
       <script nomodule src="./js/menu-wc_es5.js" defer></script>

       <script src="./js/libs/bootstrap-native.js"></script>

       <script src="./js/libs/es6-shim.min.js"></script>
       <script src="./js/libs/EventDispatcher.js"></script>
       <script src="./js/libs/promise.min.js"></script>
       <script src="./js/libs/zepto.min.js"></script>

       <script src="./js/compodoc.js"></script>

       <script src="./js/tabs.js"></script>
       <script src="./js/menu.js"></script>
       <script src="./js/libs/clipboard.min.js"></script>
       <script src="./js/libs/prism.js"></script>
       <script src="./js/sourceCode.js"></script>
          <script src="./js/search/search.js"></script>
          <script src="./js/search/lunr.min.js"></script>
          <script src="./js/search/search-lunr.js"></script>
          <script src="./js/search/search_index.js"></script>
       <script src="./js/lazy-load-graphs.js"></script>


    </body>
</html>
